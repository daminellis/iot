
A máquina é uma separadora/contadora de peças e sua programação, com Arduino,
funciona da seguinte forma:
• Uma entrada de peças é realizada de forma automática por um alimentador vertical
• Para iniciar o processo, a esteira M1 é ligada, nível lógico 0 esteira está parada, nível
lógico 1 se movendo.
• Um Servomotor empurra as peças do alimentador para cima da esteira, posição 0 º
é a de descanso, posição 90 º coloca a peça na esteira.
• No meio da esteira tem um sensor que mede a altura das peças. As peças são
divididas em dois grupos:
◦ Peças pequenas, que tem altura máxima de 15 cm;
◦ Peças grandes, que são maiores que 16 cm e com altura máxima de 30 cm;
◦ O sensor está posicionado a 45 cm da esteira, apontado para baixo.
• Ao final da esteira, as peças devem ser colocadas em suas respectivas caixas de
armazenamento. Um posicionador utilizando servomotor direciona as peças para
suas respectivas caixas.
◦ Posição de descanso deste posicionador é 90 º.
◦ Para direcionar as peças pequenas, o posicionador vai para 120 º.
◦ Para direcionar as peças grandes, o posicionador vai para 60 º.
• Na entrada de cada caixa de armazenamento tem um sensor que realiza a contagem
de peças esta contagem deve ser atualizada e apresentada no Monitor Seria toda
vez que uma peça é armazenada.
==================================================================================
#include <Servo.h>

const int servoPushPin = 9;
const int conveyorM1Pin = 10;
const int heightSensorPin = A0;  
const int smallPieceBoxPin = 11; 
const int largePieceBoxPin = 12; 

Servo servoPush;

void setup() {
  pinMode(conveyorM1Pin, OUTPUT);
  pinMode(smallPieceBoxPin, INPUT_PULLUP);
  pinMode(largePieceBoxPin, INPUT_PULLUP);
  servoPush.attach(servoPushPin);
  digitalWrite(conveyorM1Pin, HIGH);
  Serial.begin(9600);
}

void loop() {
  servoPush.write(90);
  delay(1000);
  servoPush.write(0);

  // Read height sensor
  int sensorValue = analogRead(heightSensorPin);
  if (sensorValue <= 150) {  
    servoPush.write(120);    
  } else if (sensorValue > 150 && sensorValue <= 300) { 
    servoPush.write(60);    
  }
  delay(1000);              
  servoPush.write(90);      

  if (digitalRead(smallPieceBoxPin) == LOW) {
    Serial.println("Small piece stored.");
  }
  if (digitalRead(largePieceBoxPin) == LOW) {
    Serial.println("Large piece stored.");
  }
}
